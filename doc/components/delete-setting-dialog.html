<!DOCTYPE html><html lang="en"><head><title>components/delete-setting-dialog</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../"><meta name="groc-document-path" content="components/delete-setting-dialog"><meta name="groc-project-path" content="src/components/delete-setting-dialog.js"><link rel="stylesheet" type="text/css" media="all" href="../assets/style.css"><script type="text/javascript" src="../assets/behavior.js"></script><body><div id="meta"><div class="file-path">src/components/delete-setting-dialog.js</div></div><div id="document"><div class="segment"><div class="comments "><div class="wrapper"><h1 id="suppression-de-paramtre">Suppression de paramètre</h1></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>C’est en fait une boîte de dialogue, inclue d’office dans
le conteneur parent (<code>SettingsScreen</code>), et qui va donc être
initialement <em>rendered</em> sans objectif (<code>goal</code>), puis verra ses
propriétés mises à jour à chaque utilisation.  Mais comme c’est
un composant pur fonctionnel, donc sans état aucun, nul besoin
comme pour <code>AddSettingDialog</code> d’un <code>componentWillReceiveProps</code>.
La fonction est simplement rappelée à chaque fois.  Nickel…</p></div></div><div class="code"><div class="wrapper"><span class="hljs-keyword">import</span> React, { PropTypes } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">import</span> ContentClear <span class="hljs-keyword">from</span> <span class="hljs-string">'material-ui/svg-icons/content/clear'</span>
<span class="hljs-keyword">import</span> Dialog <span class="hljs-keyword">from</span> <span class="hljs-string">'material-ui/Dialog'</span>
<span class="hljs-keyword">import</span> FlatButton <span class="hljs-keyword">from</span> <span class="hljs-string">'material-ui/FlatButton'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Il y a vraiment quelque chose de délicieux dans la déstructuration,
surtout pour un argument objet et en ajoutant des valeurs par défaut,
comme ici…</p></div></div><div class="code"><div class="wrapper"><span class="hljs-keyword">const</span> DeleteSettingDialog = ({ goal = {}, onCancel, onDelete, open }) =&gt; {
  <span class="hljs-keyword">const</span> actions = [
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">FlatButton</span> <span class="hljs-attribute">label</span>=<span class="hljs-value">'Ouh là, non !'</span> <span class="hljs-attribute">secondary</span> <span class="hljs-attribute">onTouchTap</span>=<span class="hljs-value">{onCancel}</span> <span class="hljs-attribute">keyboardFocused</span> /&gt;</span>,
    <span class="hljs-tag">&lt;<span class="hljs-title">FlatButton</span> <span class="hljs-attribute">label</span>=<span class="hljs-value">'Adios !'</span> <span class="hljs-attribute">primary</span> <span class="hljs-attribute">onTouchTap</span>=<span class="hljs-value">{onDelete}</span> <span class="hljs-attribute">icon</span>=<span class="hljs-value">{&lt;ContentClear</span> /&gt;</span>} /&gt;
  ]</span>

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">Dialog</span>
      <span class="hljs-attribute">title</span>=<span class="hljs-value">'Supprimer un objectif'</span>
      <span class="hljs-attribute">actions</span>=<span class="hljs-value">{actions}</span>
      <span class="hljs-attribute">open</span>=<span class="hljs-value">{open}</span>
      <span class="hljs-attribute">onRequestClose</span>=<span class="hljs-value">{onCancel}</span>
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span>Supprimer l’objectif « {goal.name} » ?<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Dialog</span>&gt;</span>
  )</span>
}</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Sur un composant “bête”, préciser les propriétés attendues / autorisées est
<a href="http://facebook.github.io/react/docs/reusable-components.html">une bonne pratique incontournable</a>.
Quand on n’est pas dans une classe ES6 (et en effet, les composants purs fonctionnels
sont le cas majoritaire), on colle juste la propriété <code>propTypes</code> directement sur la
fonction (ça rend exactement pareil qu&#39;une propriété <code>static</code> dans une classe ES6).</p></div></div><div class="code"><div class="wrapper">DeleteSettingDialog.propTypes = {
  onCancel: PropTypes.func.isRequired,
  onDelete: PropTypes.func.isRequired,
  open: PropTypes.bool.isRequired
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> DeleteSettingDialog</div></div></div></div></body></html>