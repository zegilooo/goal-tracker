<!DOCTYPE html><html lang="en"><head><title>containers/home-screen</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../"><meta name="groc-document-path" content="containers/home-screen"><meta name="groc-project-path" content="src/containers/home-screen.js"><link rel="stylesheet" type="text/css" media="all" href="../assets/style.css"><script type="text/javascript" src="../assets/behavior.js"></script><body><div id="meta"><div class="file-path">src/containers/home-screen.js</div></div><div id="document"><div class="segment"><div class="comments "><div class="wrapper"><h1 id="cran-principal-conteneur">Écran principal (conteneur)</h1></div></div></div><div class="segment"><div class="code"><div class="wrapper"><span class="hljs-keyword">import</span> { connect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-redux'</span>
<span class="hljs-keyword">import</span> React, { Component } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">import</span> { loggedIn } <span class="hljs-keyword">from</span> <span class="hljs-string">'../store'</span>
<span class="hljs-keyword">import</span> LoginScreen <span class="hljs-keyword">from</span> <span class="hljs-string">'./login-screen'</span>
<span class="hljs-keyword">import</span> TrackerScreen <span class="hljs-keyword">from</span> <span class="hljs-string">'./tracker-screen'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="le-composant-conteneur">Le composant conteneur</h2></div></div></div><div class="segment"><div class="code"><div class="wrapper"><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HomeScreen</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{
  render () {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Si on a un compte “connecté”, notre URL (la racine) affiche
l’écran de suivi des objectifs.  Sinon, on affiche l’écran
de connexion.</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-keyword">return</span> loggedIn() ? <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">TrackerScreen</span> /&gt;</span> : <span class="hljs-tag">&lt;<span class="hljs-title">LoginScreen</span> /&gt;</span>
  }
}
</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="connexion-au-store-redux">Connexion au <em>store</em> Redux</h2></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>On s’intéresse uniquement au champ <code>currentUSer</code> de l’état global, qui impacte
la fonction <code>loggedIn()</code> qu’on utilise.  Par ricochet, seuls les changements
apportés à ce champ (connexion, déconnexion) entraîneront un éventuel <em>re-render</em>
de notre conteneur.</p></div></div><div class="code"><div class="wrapper"><span class="hljs-keyword">const</span> mapStateToProps = ({ currentUser }) =&gt; ({ currentUser })</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>C’est <code>connect(…)</code>, fourni par Redux, qui fait les connexions nécessaires pour nous
fournir la propriété, implémenter notre <code>shouldComponentUpdate(…)</code> et nous fournir
aussi une propriété <code>dispatch(…)</code>, pré-associée au <em>store</em> Redux transmis via le
contexte React.</p></div></div><div class="code"><div class="wrapper"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> connect(mapStateToProps)(HomeScreen)</div></div></div></div></body></html>